<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>A-Frame 360° Viewer with Hotspot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css">
    <link type="text/css" rel="stylesheet" href="stylesheet/main.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link type="text/css" rel="stylesheet" href="stylesheet/3dhop.css"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script type="text/javascript" src="js/spidergl.js"></script>
    <script type="text/javascript" src="js/presenter.js"></script>
    <script type="text/javascript" src="js/nexus.js"></script>
    <script type="text/javascript" src="js/ply.js"></script>
    <script type="text/javascript" src="js/trackball_turntable.js"></script>
    <script type="text/javascript" src="js/trackball_turntable_pan.js"></script>
    <script type="text/javascript" src="js/trackball_pantilt.js"></script>
    <script type="text/javascript" src="js/trackball_sphere.js"></script>
    <script type="text/javascript" src="js/init.js"></script>
</head>
<body>

  <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="images/leechkirche.jpg" class="d-block w-100" alt="...">
      </div>
    </div>
  </div>



    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #ededda;">
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="projekt.html">Projekt</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Leechkirche
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="geschichte.html">Geschichte</a></li>
                  <li><a class="dropdown-item" href="architektur.html">Architektur</a></li>
                  <li><a class="dropdown-item" href="heilkraeuter.html">Heilkräuter</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Unterhaltung
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="memory.html">Heilkräuter-Memory</a></li>
                  <li><a class="dropdown-item" href="https://melaniefrauendorfer.8thwall.app/butterfly/">AR (Smartphone benötigt)</a></li>
                  <li><a class="dropdown-item" href="VR_butterfly.html">VR</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  3D-Modelle
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="Leechkirche_altar.html">Altar</a></li>
                    <li><a class="dropdown-item" href="Leechkirche_Mosaik.html">Mosaik</a></li>
                    <li><a class="dropdown-item" href="monument.html">Monument</a></li>
                    <li><a class="dropdown-item" href="ritter_leech.html">Ritter</a></li>
                    <li><a class="dropdown-item" href="kanzel.html">Kanzel</a></li>
                  <div class="dropdown-divider"></div>
                  <li><a class="dropdown-item" href="viewer_aussenbereich.html">Außenbereich</a></li>
                  <li><a class="dropdown-item" href="outside_3d.html">3D Außenbereich Viewer</a></li>
                  <li><a class="dropdown-item" href="inside360.html">360° Innenbereich</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="kontakt.html">Kontakt</a>
              </li>
            </ul>
          </div>
          <div class="d-flex ms-auto align-items-center" style="gap: 4px;">
            <a href="inside360.html" class="nav-link p-0" style="font-size: 15px; color: black;">DE</a>
            <span style="font-size: 15px;">|</span>
            <a href="inside360_en.html" class="nav-link p-0" style="font-size: 15px; color: black;">EN</a>
        </div>
        </div>
      </nav>

    
      <div id="viewer-container" style="width: 100%; height: 80vh;">
        <a-scene embedded style="width: 100%; height: 100%;">
            <!-- 360° Image -->
            <a-sky src="images/360.jpg" rotation="0 -90 0"></a-sky>

      <!-- Hotspots -->
<!--Altar-->
<a-entity geometry="primitive: sphere; radius: 0.1"
          material="color: blue"
          position="-1.27 -0.55 3"
          class="clickable"
          sketchfab-listener
          sketchfab-url="https://sketchfab.com/models/ce40d75b6939435090b7d8f8a148095e/embed"
          fallback-url="Leechkirche_altar.html">
</a-entity>

<!--Ritter-->
<a-entity geometry="primitive: sphere; radius: 2"
          material="color: blue"
          position="2 -0.1 -80"
          class="clickable"
          sketchfab-listener
          sketchfab-url="https://sketchfab.com/models/accd1fadf29a421a8ccb5c5360ff3d65/embed"
          fallback-url="ritter_leech.html">
</a-entity>

<!--Monument-->
<a-entity geometry="primitive: sphere; radius: 0.2"
          material="color: blue"
          position="7 -0.6 -3.5"
          class="clickable"
          sketchfab-listener
          sketchfab-url="https://sketchfab.com/models/1248e796966641f9b4c19ca52b46062e/embed"
          fallback-url="monument.html">
</a-entity>

<!--Painting-->
<a-entity geometry="primitive: sphere; radius: 0.09"
          material="color: blue"
          position="-2.7 0.85 2"
          class="clickable"
          sketchfab-listener
          sketchfab-url="https://sketchfab.com/models/ad267bd3fd114a96a526c3d4e3a55692/embed"
          fallback-url="Leechkirche_Mosaik.html">
</a-entity>

<!--Kanzel-->
<a-entity geometry="primitive: sphere; radius: 0.25"
          material="color: blue"
          position="7 2 3.3"
          class="clickable"
          sketchfab-listener
          sketchfab-url="https://sketchfab.com/models/55c5fac741f4423bae436deaf5e02148/embed"
          fallback-url="kanzel.html">
</a-entity>

      <!-- 3D Model Popup (initially hidden) 
      <a-entity id="modelPopup" visible="false" position="0 1.5 -2">
  <a-gltf-model src="models/altar_kiri/altar.glb" scale="5 5 5" position="0 0 0"></a-gltf-model>
  <a-plane position="-1.30 -0.55 2" width="2" height="0.5" color="#333">
    <a-text value="Click anywhere to close" align="center" color="#fff" position="0 0 0.01"></a-text>
  </a-plane>
</a-entity>-->

      <!-- Camera + Cursor -->
      <a-entity camera look-controls>
        <a-entity cursor="fuse: false; rayOrigin: mouse"
                  raycaster="objects: .clickable"
                  position="0 0 -1"
                  >
        </a-entity>
      </a-entity>
    </a-scene>
</div>

<div id="sketchfab-popup" style="display: none; position: fixed; top: 10%; left: 10%; width: 80%; height: 80%; background: rgba(255,255,255,0.95); z-index: 9999; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.5);">
  <div style="text-align: right; padding: 10px;">
    <button onclick="closeSketchfab()" style="font-size: 20px; border: none; background: none;">❌</button>
  </div>
  <iframe
    id="sketchfab-iframe"
    width="100%"
    height="90%"
    frameborder="0"
    allowfullscreen
    mozallowfullscreen="true"
    webkitallowfullscreen="true"
    allow="autoplay; fullscreen; xr-spatial-tracking"
    xr-spatial-tracking
    execution-while-out-of-viewport
    execution-while-not-rendered
    web-share>
  </iframe>
  <div id="fallback-hint" style="text-align: center; margin-top: -20px; padding: 0 10px 10px 10px;">
    <div style="background: white; display: inline-block; padding: 5px 10px; border-radius: 5px; font-size: 14px;">
      Seite lädt nicht? <a id="fallback-link" href="#" style="color: #007bff; text-decoration: underline;">Klicke hier</a>
    </div>
  </div>
</div>
</div>

    <script>
  function openSketchfab(url, fallbackUrl) {
    const popup = document.getElementById("sketchfab-popup");
    const iframe = document.getElementById("sketchfab-iframe");
    const fallbackLink = document.getElementById("fallback-link");

    iframe.src = url;
    fallbackLink.href = fallbackUrl || "#";
    popup.style.display = "block";
  }

  function closeSketchfab() {
    document.getElementById("sketchfab-popup").style.display = "none";
    document.getElementById("sketchfab-iframe").src = "";
    document.getElementById("fallback-link").href = "#";
  }

  AFRAME.registerComponent('sketchfab-listener', {
    init: function () {
      this.el.addEventListener('click', () => {
        const modelUrl = this.el.getAttribute('sketchfab-url');
        const fallbackUrl = this.el.getAttribute('fallback-url');
        if (modelUrl) {
          openSketchfab(modelUrl, fallbackUrl);
        }
      });
    }
  });
</script>

    <!-- Footer -->
    <footer class="text-center text-white" style="background-color: #ededda;">
        <div class="text-center p-3" style="background-color: #ededda; color: #6b6b62;">
          © 2025
        </div>
    </footer>

</body>
</html>